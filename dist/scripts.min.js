const KEYARR=["name","id","index"];let cardRepository=function(){let t=[],n="https://api.hearthstonejson.com/v1/latest/enUS/cards.collectible.json";function o(n){if("object"==typeof n){let o=!0;KEYARR.forEach(function(t){n.hasOwnProperty(t)||(o=!1)}),o?t.push(n):console.warn("Card data is missing information.  Card not added.")}else console.warn('Card of type " + (typeof card) + " was not added to the repository.')}function e(t){$("#loading").css("visibility","visible"),$("#loading").css("opacity","0.7"),a(t)}function a(t){let n="https://art.hearthstonejson.com/v1/render/latest/enUS/512x/"+t.id+".png",o=$('<img id="the_image" alt="Photo of '+t.name+"\" onload=\"setTimeout(function () { $('#loading').css('visibility', 'hidden');}, 100)\" src=\""+n+'" />'),e=$('<button type="button" id="getInfo" class="btn btn-primary list-group-item list-group-item-action" data-toggle="modal" data-target="#cardModal" onclick="cardRepository.loadDetails('+t.index+')">click here for details</button>');$(".img_container").empty(),$(".img_container").append(o),$(".img_container").append(e)}function i(t){$(".modal-title").html($('<div id="modalName">'+t.name+'</div> <div id="modalFlavor">'+t.flavor+"</div>")),$(".modal-body").empty(),$.each(t,function(n){let o=$('<div id="modal_'+n+'" class="modal_info"><span class="keys">'+n+":</span> "+t[n]+"</div>");"name"!=n&&"flavor"!=n&&"playRequirements"!=n&&$(".modal-body").append(o)})}return{add:o,addListItem:function(t){let n=t.name;t.name.charAt(0)<="z"&&t.name.charAt(0)>="a"&&(n=t.name.charAt(0).toUpperCase()+t.name.slice(1));let o=$('<li><button class="list-group-item list-group-item-action">'+n+"</button></li>");$(".the_list").append(o),o.on("click",function(){e(t)})},getAll:function(){return t},showImage:e,loadList:function(){return $.ajax(n,{dataType:"json"}).then(function(t){return t}).then(function(t){let n=0;t.forEach(function(t){o({name:t.name,id:t.id,index:n++})})})},loadDetails:function(t){$.ajax(n,{dataType:"json"}).then(function(n){i(n[t]),setTimeout(function(){document.getElementById("loading").style.visibility="hidden"},50)})},loadImage:a,showModal:i}}();cardRepository.loadList().then(function(){cardRepository.getAll().forEach(function(t){cardRepository.addListItem(t)})});
